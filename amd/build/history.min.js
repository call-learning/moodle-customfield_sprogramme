define("customfield_sprogramme/history",["exports","customfield_sprogramme/local/state","customfield_sprogramme/local/repository","core/notification","./local/components/history"],(function(_exports,_state,_repository,_notification,_history){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module history
   *
   * @module     customfield_sprogramme/history
   * @copyright  2025 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_state=_interopRequireDefault(_state),_repository=_interopRequireDefault(_repository),_notification=_interopRequireDefault(_notification);class History{constructor(rfcid,courseid){this.rfcid=rfcid,this.courseid=courseid,this.getProgrammeHistory()}async getProgrammeHistory(){const context={rfcid:this.rfcid,courseid:this.courseid};try{const response=await _repository.default.getProgrammeHistory(context);0===response.length&&_state.default.setValue("history",[]);const history={modules:this.parseModules(response),columns:response.columns,rfcs:response.rfcs};_state.default.setValue("history",history)}catch(error){_notification.default.exception(error)}}parseModules(response){return response.modules.forEach((mod=>{mod.rows.map((row=>(row.cells=row.cells.map((cell=>{const column=response.columns.find((column=>column.column==cell.column));return(cell=Object.assign({},cell,column)).changed=cell.value!==cell.oldvalue,cell})),row)))})),response.modules}}var _default={init:(rfcid,courseid)=>{new History(rfcid,courseid)}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=history.min.js.map