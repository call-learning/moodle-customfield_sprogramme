define("customfield_sprogramme/programme_actions",["exports","customfield_sprogramme/manager","customfield_sprogramme/history","core/str","core/modal","jquery"],(function(_exports,_manager,_history,_str,_modal,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module formfield
   *
   * @module     customfield_sprogramme/formfield
   * @copyright  2025 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_manager=_interopRequireDefault(_manager),_history=_interopRequireDefault(_history),_modal=_interopRequireDefault(_modal),_jquery=_interopRequireDefault(_jquery);const showHistory=async(rfcid,courseid)=>{await getProgrammeHistory(rfcid,courseid);const modalContent=document.querySelector('[data-region="history"]');(await _modal.default.create({large:!0,title:(0,_str.getString)("history","customfield_sprogramme"),body:modalContent,show:!0})).getModal()[0].classList.add("modal-customfield_sprogramme_history")},getEditor=async(element,courseid)=>{await getProgramme(element,courseid);const modalContent=document.querySelector('[data-region="app"]'),modalHeader=document.querySelector('[data-region="modalheader"]'),modal=await _modal.default.create({large:!0,title:(0,_str.getString)("editprogramme","customfield_sprogramme"),body:modalContent,show:!0}),modalElement=modal.getModal()[0];modalElement.classList.add("modal-customfield_sprogramme_editor");const header=modalElement.querySelector('[data-region="header"]'),title=modalElement.querySelector('[data-region="title"]');title&&header.insertBefore(modalHeader,title.nextSibling),document.addEventListener("closeform",(()=>{modal.hide()}))},getProgramme=async(element,courseid)=>{_manager.default.init(element,courseid)},getProgrammeHistory=async(rfcid,courseid)=>{_history.default.init(rfcid,courseid)};var _default={init:async()=>{document.addEventListener("click",(async event=>{const editaction=event.target.closest('[data-action="editprogramme"]');if(editaction){const courseid=editaction.dataset.courseid;await getEditor(editaction,courseid),event.preventDefault()}const actionBtn=event.target.closest('[data-action="showrfc"]');if(actionBtn){const rfcid=parseInt(actionBtn.dataset.rfcid),courseid=actionBtn.dataset.courseid;await showHistory(rfcid,courseid),event.preventDefault()}const popOvers=document.querySelectorAll('[data-toggle="popover"]'),currentPopover=event.target.closest('[data-toggle="popover"]');popOvers.length>0&&popOvers.forEach((popover=>{popover!==currentPopover&&(0,_jquery.default)(popover).popover("hide")}))}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=programme_actions.min.js.map