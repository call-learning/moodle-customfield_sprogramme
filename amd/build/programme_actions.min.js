define("customfield_sprogramme/programme_actions",["exports","customfield_sprogramme/manager","customfield_sprogramme/history","core/str","core/modal","jquery"],(function(_exports,_manager,_history,_str,_modal,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module formfield
   *
   * @module     customfield_sprogramme/formfield
   * @copyright  2025 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_manager=_interopRequireDefault(_manager),_history=_interopRequireDefault(_history),_modal=_interopRequireDefault(_modal),_jquery=_interopRequireDefault(_jquery);const showHistory=async(rfcid,datafieldid)=>{await getProgrammeHistory(rfcid,datafieldid);const modalContent=document.querySelector('[data-region="history"]');(await _modal.default.create({large:!0,title:(0,_str.getString)("history","customfield_sprogramme"),body:modalContent,show:!0})).getModal()[0].classList.add("modal-customfield_sprogramme_history")};class CustomModal extends _modal.default{hide(){}close(){super.hide()}}const getEditor=async(element,datafieldid)=>{await getProgramme(element,datafieldid);const modalContent=document.querySelector('[data-region="app"]'),modalHeader=document.querySelector('[data-region="modalheader"]'),modal=await CustomModal.create({large:!0,title:(0,_str.getString)("editprogramme","customfield_sprogramme"),body:modalContent,show:!0}),modalElement=modal.getModal()[0];modalElement.classList.add("modal-customfield_sprogramme_editor");const header=modalElement.querySelector('[data-region="header"]'),title=modalElement.querySelector('[data-region="title"]');title&&header.insertBefore(modalHeader,title.nextSibling),document.addEventListener("closeform",(()=>{modal.close()}))},getProgramme=async(element,datafieldid)=>{_manager.default.init(element,datafieldid)},getProgrammeHistory=async(rfcid,datafieldid)=>{_history.default.init(rfcid,datafieldid)};var _default={init:async()=>{document.addEventListener("click",(async event=>{const editaction=event.target.closest('[data-action="editprogramme"]');if(editaction){const datafieldid=editaction.dataset.datafieldid;await getEditor(editaction,datafieldid),event.preventDefault()}const actionBtn=event.target.closest('[data-action="showrfc"]');if(actionBtn){const rfcid=parseInt(actionBtn.dataset.rfcid),datafieldid=actionBtn.dataset.datafieldid;await showHistory(rfcid,datafieldid),event.preventDefault()}const popOvers=document.querySelectorAll('[data-toggle="popover"]'),currentPopover=event.target.closest('[data-toggle="popover"]');popOvers.length>0&&popOvers.forEach((popover=>{popover!==currentPopover&&(0,_jquery.default)(popover).popover("hide")}))}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=programme_actions.min.js.map