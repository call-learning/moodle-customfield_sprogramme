{"version":3,"file":"history.min.js","sources":["../src/history.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module history\n *\n * @module     customfield_sprogramme/history\n * @copyright  2025 Bas Brands <bas@sonsbeekmedia.nl>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport State from 'customfield_sprogramme/local/state';\nimport Repository from 'customfield_sprogramme/local/repository';\nimport Notification from 'core/notification';\nimport './local/components/history';\n\n/**\n * Initialise the history module.\n */\nclass History {\n\n    /**\n     * Constructor.\n     * @param {HTMLElement} element The element.\n     * @param {Int} courseid The courseid.\n     * @param {Int} adminid The adminid.\n     * @return {void}\n     */\n    constructor(element, courseid, adminid) {\n        this.element = element;\n        this.courseid = courseid;\n        this.adminid = adminid;\n        this.getProgrammeHistory();\n    }\n\n    /**\n     * Get the stored programme history for this adminid.\n     */\n    async getProgrammeHistory() {\n        const context = {\n            courseid: this.courseid,\n            adminid: this.adminid,\n        };\n        try {\n            const data = await Repository.getProgrammeHistory(context);\n            if (data.length === 0) {\n                State.setValue('history', []);\n            }\n            State.setValue('history', data);\n        } catch (error) {\n            Notification.exception(error);\n        }\n    }\n}\n\n/*\n * Initialise\n *\n * @param {HTMLElement} element The element.\n * @param {Int} courseid The courseid.\n * @\n */\nconst init = (element, courseid, adminid) => {\n    new History(element, courseid, adminid);\n};\n\nexport default {\n    init: init,\n};"],"names":["History","constructor","element","courseid","adminid","getProgrammeHistory","context","this","data","Repository","length","setValue","error","exception","init"],"mappings":";;;;;;;qOA+BMA,QASFC,YAAYC,QAASC,SAAUC,cACtBF,QAAUA,aACVC,SAAWA,cACXC,QAAUA,aACVC,wDAOCC,QAAU,CACZH,SAAUI,KAAKJ,SACfC,QAASG,KAAKH,mBAGRI,WAAaC,oBAAWJ,oBAAoBC,SAC9B,IAAhBE,KAAKE,uBACCC,SAAS,UAAW,mBAExBA,SAAS,UAAWH,MAC5B,MAAOI,6BACQC,UAAUD,sBAgBpB,CACXE,KALS,CAACZ,QAASC,SAAUC,eACzBJ,QAAQE,QAASC,SAAUC"}